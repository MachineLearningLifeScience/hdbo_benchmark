{{ $data := (getCSV "," "csv/related_work.csv") }}
{{ $headers := index $data 0 }}

<table class="table table-hover border" id="table_id">
    <thead class="">
        <tr class="">
            {{ range $headers }}
                {{ if eq . "Date of publishing" }}
                    <th scope="col" class="" data-sortable="true" data-sort-order="desc" data-sorter="dateSorter">&nbsp;{{ . | safeHTML }}</th>
                {{ else if eq . "Reference" }}
                {{ else }}
                    <th scope="col" class="" data-sortable="true" data-sort-order="desc">&nbsp;{{ . | safeHTML }}</th>
                {{ end }}
            {{ end }}
        </tr>
    </thead>
    <tbody>
        {{ range $i, $row := after 1 $data }} 
        <tr>
            <th scope="row" class="font-monospace fw-bold">{{ index $row 0 }}</th>
            <td>{{ index $row 1 }}</td>
            <td>
                {{ if eq (index $row 2) "Couldnâ€™t find one" }}
                    <span class="text-muted">n/a</span>
                {{ else }}
                    <a href="{{ index $row 2 }}" class="btn btn-sm btn-primary">
                        {{- partial "assets/icon.html" (dict "icon" "fas fa-flask" "spacing" false) }}
                    </a>
                {{ end }}
            </td>
            <td>
                <a href="{{ index $row 4 }}">
                    {{ index $row 3 }}
                </a>
            </td>
            <td>{{ index $row 5 }}</td>
        </tr>
        {{ end }}
    </tbody>
</table>

<script src="{{ absURL "js/jquery-3.7.1.slim.min.js" }}"></script>
<script src="{{ absURL "js/bootstrap-table.min.js" }}"></script>

<script>
    function dateSorter(a, b){
        return(new Date(a).getTime() - new Date(b).getTime());
    }

    $("#table_id").bootstrapTable({
        search: true,
    });
</script>