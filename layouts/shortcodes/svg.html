<style>
    figure#svg svg {
        width: 100% !important;
        height: auto !important;
        /* margin-left: 16.5% !important; */
    }
</style>

<figure id="svg" class="svg"> 
    {{ readFile (print (index .Params 0)) | safeHTML }}
    <figcaption class="figure-caption px-4">{{ index .Params 1 | safeHTML }}</figcaption>
</figure>

<script>
    // find all href in svg figure#svg
    document.querySelectorAll('figure#svg a').forEach(function(a) {
        // get the href attribute
        var href = a.getAttribute('href');
        
        // if the href attribute is empty, continue to the next iteration
        if (!href) {
            return;
        }

        // find the previous svg "g" group element of the "a" element
        var prev = a.previousElementSibling;
        // if the previous element is not a "path" element, continue to the next iteration
        if (prev.tagName !== 'path') {
            return;
        }
        path = prev;

        // change fill to red
        // console.log(path);
        // path.style.fill = 'red';

        var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        rect.setAttribute('x', path.getBBox().x);
        rect.setAttribute('y', path.getBBox().y);
        rect.setAttribute('href', href);
        rect.setAttribute('width', path.getBBox().width);
        rect.setAttribute('height', path.getBBox().height);
        // rect.setAttribute('data-toggle', 'tooltip');
        // rect.setAttribute('title', 'Click to view details');

        rect.style.fill = 'red';
        rect.style.opacity = 0;
        rect.style.cursor = 'pointer';
        rect.addEventListener('click', function() {
            window.location.href = href;
        });
        path.parentNode.insertBefore(rect, path.nextSibling);
    });
</script>
